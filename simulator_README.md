# شبیه‌ساز کنترل سرعت خط تولید / Line Speed Control Simulator

## نصب و اجرا / Installation and Run

### 1. نصب پیش‌نیازها / Install Requirements
```bash
pip install -r requirements.txt
```

### 2. اجرای شبیه‌ساز / Run Simulator
```bash
python line_speed_simulator.py
```

## ویژگی‌های شبیه‌ساز / Simulator Features

### 🎛️ کنترل‌ها / Controls
- **فعال‌سازی**: چک‌باکس Enable برای روشن/خاموش کردن سیستم
- **انتخاب حالت**: دستی، HMI، یا اتوماتیک
- **تنظیم سرعت**: اسلایدرهای سرعت HMI و اتوماتیک
- **دکمه‌های دستی**: افزایش/کاهش سرعت و حرکت آهسته

### 📊 نمایش وضعیت / Status Display
- سرعت فعلی (m/min و درصد)
- شتاب لحظه‌ای (m/s²)
- حالت عملیاتی
- زمان کارکرد و مسافت طی شده
- هشدارها و آلارم‌ها

### 📈 نمودار زنده / Live Graph
- نمایش سرعت واقعی (آبی)
- نمایش نقطه تنظیم (قرمز نقطه‌چین)
- به‌روزرسانی در زمان واقعی

## نحوه استفاده / How to Use

### 1. شروع شبیه‌سازی / Start Simulation
1. دکمه "▶️ شروع شبیه‌سازی" را بزنید
2. چک‌باکس "فعال‌سازی" را تیک بزنید
3. حالت مورد نظر را انتخاب کنید

### 2. تست حالت‌های مختلف / Test Different Modes

#### حالت دستی / Manual Mode:
- رادیو دکمه "دستی/Manual" را انتخاب کنید
- دکمه‌های ▲ و ▼ را برای تغییر سرعت نگه دارید

#### حالت HMI:
- رادیو دکمه "HMI" را انتخاب کنید
- اسلایدر "سرعت HMI" را تنظیم کنید

#### حالت اتوماتیک / Auto Mode:
- رادیو دکمه "اتوماتیک/Auto" را انتخاب کنید
- اسلایدر "سرعت اتوماتیک" را تنظیم کنید

### 3. تست ویژگی‌های ایمنی / Test Safety Features

#### توقف اضطراری:
1. در حال کار بودن سیستم، دکمه "🛑 توقف اضطراری" را بزنید
2. سرعت با رمپ سریع کاهش می‌یابد
3. پس از توقف، سیستم قفل می‌شود

#### ریست سیستم:
1. پس از توقف اضطراری، دکمه "🔄 ریست" را بزنید
2. قفل اضطراری برداشته می‌شود

#### اینترلاک ایمنی:
- تیک "اینترلاک ایمنی" را بردارید
- سیستم متوقف می‌شود

### 4. حرکت آهسته / Jog Operation
- دکمه‌های "► Jog جلو" یا "◄ Jog عقب" را نگه دارید
- سرعت به 5 m/min محدود می‌شود

## مشاهدات کلیدی / Key Observations

### 🔄 رمپ‌های نرم / Smooth Ramps
- تغییرات سرعت به صورت تدریجی انجام می‌شود
- زمان رمپ قابل تنظیم است (در کد)

### ⚠️ هشدارها / Warnings
- **هشدار سرعت بالا**: در سرعت‌های بالای 90% قرمز می‌شود
- **رمپ فعال**: هنگام تغییر سرعت نارنجی می‌شود
- **قفل اضطراری**: پس از توقف اضطراری قرمز می‌شود
- **در نقطه تنظیم**: وقتی به سرعت هدف رسید سبز می‌شود

### 📊 اطلاعات عملیاتی / Operational Data
- زمان کارکرد به صورت خودکار محاسبه می‌شود
- مسافت طی شده بر اساس سرعت و زمان محاسبه می‌شود

## نکات فنی / Technical Notes

- سیکل اسکن شبیه‌سازی: 100ms
- حداکثر سرعت پیش‌فرض: 100 m/min
- زمان رمپ عادی: 5 ثانیه
- زمان توقف اضطراری: 2 ثانیه

## مقایسه با PLC واقعی / Comparison with Real PLC

این شبیه‌ساز رفتار فانکشن‌بلاک Structured Text را با دقت بالا شبیه‌سازی می‌کند:
- ✅ منطق کنترل یکسان
- ✅ محاسبات رمپ مشابه
- ✅ مدیریت حالت‌ها یکسان
- ✅ سیستم ایمنی مشابه

تفاوت‌ها:
- زمان سیکل در PLC واقعی معمولاً کمتر است (10-50ms)
- I/O فیزیکی در PLC واقعی وجود دارد
- در PLC واقعی محدودیت‌های سخت‌افزاری وجود دارد

---

**توسعه‌دهنده**: AI Assistant  
**تاریخ**: 2025/01/07  
**نسخه**: 1.0