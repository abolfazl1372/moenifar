# ูุงูฺฉุดูโุจูุงฺฉ ฺฉูุชุฑู ุณุฑุนุช ุฎุท ุชููุฏ (FB_LineSpeedControl)

## ูุนุฑู ูพุฑูฺู

ุงู ูพุฑูฺู ุดุงูู ฺฉ ูุงูฺฉุดูโุจูุงฺฉ ูพุดุฑูุชู ุจุฑุง ฺฉูุชุฑู ุณุฑุนุช ุฎุทูุท ุชููุฏ ุตูุนุช ุงุณุช ฺฉู ุจู ุฒุจุงู **Structured Text** (ST) ุจุฑ ุงุณุงุณ ุงุณุชุงูุฏุงุฑุฏ **IEC 61131-3** ููุดุชู ุดุฏู ุงุณุช.

## ฺฉุงุฑุจุฑุฏูุง ุตูุนุช

- **ุฎุทูุท ูููุช**: ฺฉูุชุฑู ุณุฑุนุช ุฏุฑ ุชููุฏ ูุฑูโูุง ฺูุฏูุงู
- **ูุงุดูโูุง ฺุงูพ**: ุชูุธู ุณุฑุนุช ุฎุท ฺุงูพ ุจุฑ ุงุณุงุณ ููุน ูุญุตูู
- **ุฎุทูุท ุจุณุชูโุจูุฏ**: ฺฉูุชุฑู ุณุฑุนุช ููุงุฑ ููุงูู ู ุณุณุชูโูุง ุจุณุชูโุจูุฏ
- **ุฎุทูุท ุชููุฏ ูุณุงุฌ**: ุชูุธู ุณุฑุนุช ูุงุดูโุขูุงุช ุจุงููุฏฺฏ
- **ุณุณุชูโูุง ุญููโูููู**: ฺฉูุชุฑู ููุงุฑูุง ููุงูู

## ูฺฺฏโูุง ฺฉูุฏ

### ๐ง ุญุงูุชโูุง ุนููฺฉุฑุฏ
- **ุญุงูุช ุฏุณุช (Manual)**: ฺฉูุชุฑู ุณุฑุนุช ุจุง ุฏฺฉููโูุง Up/Down
- **ุญุงูุช HMI**: ุชูุธู ุณุฑุนุช ุงุฒ ุฑุงุจุท ฺฉุงุฑุจุฑ
- **ุญุงูุช ุงุชููุงุชฺฉ (Auto)**: ฺฉูุชุฑู ุณุฑุนุช ุงุฒ ุณุณุชูโูุง ุจุงูุงุชุฑ

### ๐จ ุณุณุชู ุงูู
- **ุชููู ุงุถุทุฑุงุฑ**: ฺฉุงูุด ุณุฑุน ุณุฑุนุช ุจุง ุฑููพ ุงูู
- **ููู ุงูู**: ุฌููฺฏุฑ ุงุฒ ุฑุงูโุงูุฏุงุฒ ูพุณ ุงุฒ ุชููู ุงุถุทุฑุงุฑ
- **ูุญุฏูุฏุช ุณุฑุนุช**: ุญุฏุงูู ู ุญุฏุงฺฉุซุฑ ุณุฑุนุช ูุงุจู ุชูุธู

### โก ฺฉูุชุฑู ูพุดุฑูุชู
- **ุฑููพ ูุฑู**: ุชุบุฑ ุชุฏุฑุฌ ุณุฑุนุช ุจุฑุง ูุญุงูุธุช ุงุฒ ุชุฌูุฒุงุช
- **ุชูุณู ุงูู**: ุฌููฺฏุฑ ุงุฒ ุฎุทุง ุชูุณู ุจุฑ ุตูุฑ
- **ุฒูุงูโูุง ูุงุจู ุชูุธู**: ุฑููพโูุง ูุฎุชูู ุจุฑุง ุญุงูุชโูุง ูุฎุชูู

## ุณุงุฎุชุงุฑ ูุงูโูุง

```
โโโ FB_LineSpeedControl.st   # ูุงูฺฉุดูโุจูุงฺฉ ุงุตู
โโโ Example_Usage.st         # ูุซุงู ุงุณุชูุงุฏู
โโโ README_Persian.md        # ุงู ูุงู ุชูุถุญุงุช
```

## ูพุงุฑุงูุชุฑูุง ูุฑูุฏ

| ูพุงุฑุงูุชุฑ | ููุน | ุชูุถุญุงุช | ููุฏุงุฑ ูพุดโูุฑุถ |
|---------|-----|---------|---------------|
| `enable` | BOOL | ูุนุงูโุณุงุฒ ูุงูฺฉุดูโุจูุงฺฉ | - |
| `mode` | INT | ุญุงูุช ฺฉุงุฑ (0=Manual, 1=HMI, 2=Auto) | - |
| `setpointHMI` | REAL | ููุทู ุชูุธู ุงุฒ HMI (m/min) | - |
| `autoSetpoint` | REAL | ููุทู ุชูุธู ุงุชููุงุชฺฉ (m/min) | - |
| `speedUp` | BOOL | ุฏฺฉูู ุงูุฒุงุด ุณุฑุนุช ุฏุณุช | - |
| `speedDown` | BOOL | ุฏฺฉูู ฺฉุงูุด ุณุฑุนุช ุฏุณุช | - |
| `stopEmergency` | BOOL | ุชููู ุงุถุทุฑุงุฑ | - |
| `maxSpeed` | REAL | ุญุฏุงฺฉุซุฑ ุณุฑุนุช ูุฌุงุฒ (m/min) | 100.0 |
| `minSpeed` | REAL | ุญุฏุงูู ุณุฑุนุช ูุฌุงุฒ (m/min) | 0.0 |
| `rampUpTimeNormal_s` | REAL | ุฒูุงู ุฑููพ ุนุงุฏ (ุซุงูู) | 5.0 |
| `rampDownTimeEmergency_s` | REAL | ุฒูุงู ุฑููพ ุชููู ุงุถุทุฑุงุฑ (ุซุงูู) | 2.0 |
| `manualRampTime_s` | REAL | ุฒูุงู ุฑููพ ุญุงูุช ุฏุณุช (ุซุงูู) | 1.0 |
| `rampStep` | REAL | ูุฏู ุชุบุฑ ุณุฑุนุช ุฏุณุช (m/min) | 1.0 |
| `scanCycle_ms` | REAL | ุฒูุงู ฺุฑุฎู ุงุณฺฉู (ููโุซุงูู) | 10.0 |

## ูพุงุฑุงูุชุฑูุง ุฎุฑูุฌ

| ูพุงุฑุงูุชุฑ | ููุน | ุชูุถุญุงุช |
|---------|-----|---------|
| `speedOut_mpm` | REAL | ุณุฑุนุช ุฎุฑูุฌ (m/min) |
| `emergencyLatched` | BOOL | ูุถุนุช ููู ุชููู ุงุถุทุฑุงุฑ |

## ูุญูู ุงุณุชูุงุฏู

### 1. ุงุนูุงู Instance

```pascal
VAR
    lineSpeedController : FB_LineSpeedControl;
END_VAR
```

### 2. ูุฑุงุฎูุงู ูุงูฺฉุดูโุจูุงฺฉ

```pascal
lineSpeedController(
    enable := TRUE,
    mode := 1,
    setpointHMI := 50.0,
    // ุณุงุฑ ูพุงุฑุงูุชุฑูุง...
    speedOut_mpm => outputSpeed
);
```

## ุงูฺฏูุฑุชู ฺฉุงุฑฺฉุฑุฏ

### 1. ุจุฑุฑุณ ูุนุงูโุณุงุฒ
- ุงฺฏุฑ `enable = FALSE` ุจุงุดุฏุ ุฎุฑูุฌ ุจู ุตูุฑ ูโุฑุณุฏ

### 2. ูุฏุฑุช ุชููู ุงุถุทุฑุงุฑ
- ุฏุฑ ุตูุฑุช ูุนุงู ุดุฏู `stopEmergency`ุ ุณุฑุนุช ุจุง ุฑููพ ุณุฑุน ฺฉุงูุด ูโุงุจุฏ
- ูพุณ ุงุฒ ุฑุณุฏู ุจู ุตูุฑุ ุณุณุชู ููู ูโุดูุฏ

### 3. ุงูุชุฎุงุจ ุญุงูุช ฺฉุงุฑ
- **Manual (0)**: ฺฉูุชุฑู ุจุง ุฏฺฉููโูุง Up/Down
- **HMI (1)**: ุงุณุชูุงุฏู ุงุฒ `setpointHMI`
- **Auto (2)**: ุงุณุชูุงุฏู ุงุฒ `autoSetpoint`

### 4. ุงุนูุงู ุฑููพ ูุฑู
- ูุญุงุณุจู ุชูุงูุช ุจู ุณุฑุนุช ูุนู ู ูุฏู
- ุงุนูุงู ุชุฏุฑุฌ ุชุบุฑุงุช ุจุง ุฑููพ ููุงุณุจ

### 5. ูุญุฏูุฏุณุงุฒ
- ุงุนูุงู ุญุฏุงูู ู ุญุฏุงฺฉุซุฑ ุณุฑุนุช

## ุชุงุจุน SafeDivide

```pascal
FUNCTION SafeDivide : REAL
// ุฌููฺฏุฑ ุงุฒ ุฎุทุง ุชูุณู ุจุฑ ุตูุฑ
IF ABS(denominator) < 0.0001 THEN
    SafeDivide := 0.0;
ELSE
    SafeDivide := numerator / denominator;
END_IF;
```

## ูฺฉุงุช ุงูู

โ๏ธ **ูุดุฏุงุฑูุง ููู:**

1. **ุชูุธู ุฒูุงู ุฑููพ**: ุฒูุงูโูุง ุฑููพ ุจุงุฏ ูุชูุงุณุจ ุจุง ุงูุฑุณ ุณุณุชู ุชูุธู ุดููุฏ
2. **ุญุฏุงฺฉุซุฑ ุณุฑุนุช**: ููุฏุงุฑ `maxSpeed` ูุจุงุฏ ุงุฒ ุญุฏ ูุฌุงุฒ ูฺฉุงูฺฉ ุชุฌูุฒุงุช ุชุฌุงูุฒ ฺฉูุฏ
3. **ุชููู ุงุถุทุฑุงุฑ**: ุณุณุชู ุชููู ุงุถุทุฑุงุฑ ุจุงุฏ ูุณุชูู ุงุฒ PLC ูุฒ ูุงุจู ุงุฌุฑุง ุจุงุดุฏ
4. **ุฒูุงู ฺุฑุฎู**: `scanCycle_ms` ุจุงุฏ ุจุง ุฒูุงู ูุงูุน ฺุฑุฎู PLC ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ

## ูุซุงู ูพฺฉุฑุจูุฏ ุจุฑุง ฺฉุงุฑุจุฑุฏูุง ูุฎุชูู

### ุฎุท ูููุช
```pascal
maxSpeed := 200.0;              // m/min
rampUpTimeNormal_s := 15.0;     // ุฑููพ ุขูุณุชู ุจุฑุง ูููุช
rampDownTimeEmergency_s := 5.0; // ุชููู ูุณุจุชุงู ุขูุณุชู
```

### ุฎุท ุจุณุชูโุจูุฏ
```pascal
maxSpeed := 80.0;               // m/min
rampUpTimeNormal_s := 3.0;      // ุฑููพ ุณุฑุน
rampDownTimeEmergency_s := 1.0; // ุชููู ุณุฑุน
```

### ุฎุท ฺุงูพ
```pascal
maxSpeed := 150.0;              // m/min
rampUpTimeNormal_s := 8.0;      // ุฑููพ ูุชูุณุท
rampDownTimeEmergency_s := 2.0; // ุชููู ุณุฑุน ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุถุงุนุงุช
```

## ุชุณุช ู ุงุดฺฉุงูโุฒุฏุง

### ุจุฑุฑุณ ุนููฺฉุฑุฏ ุตุญุญ
1. ุชุณุช ุชุบุฑ ุญุงูุชโูุง Manual/HMI/Auto
2. ุชุณุช ุชููู ุงุถุทุฑุงุฑ ู ููู ุดุฏู ุณุณุชู
3. ุจุฑุฑุณ ูุญุฏูุฏุชโูุง ุญุฏุงูู/ุญุฏุงฺฉุซุฑ ุณุฑุนุช
4. ุชุณุช ุฑููพโูุง ูุฎุชูู

### ูุดฺฉูุงุช ุฑุงุฌ
- **ุณุฑุนุช ุซุงุจุช ููโูุงูุฏ**: ุจุฑุฑุณ ููุฏุงุฑ `scanCycle_ms`
- **ุฑููพ ุฎู ุณุฑุน**: ุงูุฒุงุด ุฒูุงู ุฑููพ
- **ุนุฏู ูพุงุณุฎ ุจู ุฏฺฉููโูุง**: ุจุฑุฑุณ ุญุงูุช Manual

## ูุฌูุฒ ู ุญููู ูุดุฑ

ุงู ฺฉุฏ ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ูพุฑูฺูโูุง ุตูุนุช ุขุฒุงุฏ ุงุณุช.
ุชุงุฑุฎ: ฒฐฒต/ฐท/ฐฒ

---

**ููุณูุฏู**: AI Assistant  
**ุฒุจุงู ุจุฑูุงููโููุณ**: IEC 61131-3 Structured Text  
**ููุงุณุจ ุจุฑุง**: Siemens, Allen-Bradley, Schneider, ู ุณุงุฑ PLCูุง ุงุณุชุงูุฏุงุฑุฏ